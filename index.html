<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SCRT Schema Client</title>
    <link rel="stylesheet" href="/style.css" />
</head>

<body>
    <header>
        <h1>SCRT Schema Client</h1>
        <p class="subtitle">Shared Go/TypeScript schema cache demo</p>
        <nav>
            <a href="/index.html">Schema Console</a>
            <a href="/showcase.html">Example Showcase</a>
            <a href="https://github.com/oarkflow/scrt" target="_blank" rel="noreferrer">GitHub Repo</a>
        </nav>
    </header>
    <main>
        <section class="panel">
            <div class="field">
                <label for="server">Server URL</label>
                <input id="server" type="text" value="http://localhost:8080" />
            </div>
            <div class="field">
                <label for="schema-select">Schema</label>
                <select id="schema-select"></select>
            </div>
            <div class="actions">
                <button id="refresh-docs" type="button">Refresh Schemas</button>
                <button id="load-records" type="button">Load Records</button>
            </div>
            <div id="schema-preview" class="schema-preview">
                <div class="schema-preview-message">Select a schema to inspect field layout.</div>
            </div>
        </section>

        <section class="panel">
            <pre id="status">Idle</pre>
            <ul id="records"></ul>
        </section>

        <section class="panel crud">
            <div>
                <h2>Schema CRUD</h2>
                <form id="document-form">
                    <label for="document-name">Schema Name</label>
                    <input id="document-name" type="text" placeholder="inventory" />
                    <label for="document-body">Schema Definition</label>
                    <textarea id="document-body" placeholder="@schema:Example&#10;@field ID uint64 serial"></textarea>
                    <div class="actions">
                        <button type="submit">Save Schema</button>
                    </div>
                </form>
            </div>
            <div>
                <h2>Record CRUD</h2>
                <form id="record-form">
                    <label for="record-schema">Schema</label>
                    <input id="record-schema" type="text" placeholder="Message" />
                    <label for="record-text">SCRT Rows</label>
                    <textarea id="record-text" placeholder='@User&#10;1, "first", "last"'></textarea>
                    <p class="hint">Paste raw SCRT rows. Leave blank to rely on the payload file.</p>
                    <label for="record-file">Upload SCRT Payload</label>
                    <input id="record-file" type="file" accept=".scrt,.txt,application/x-scrt,text/plain" />
                    <p class="hint">Upload `.scrt` text or binary payloads. Scopes like @User auto-select the target
                        schema.</p>
                    <label for="record-mode">Write Mode</label>
                    <select id="record-mode">
                        <option value="append">Append (default)</option>
                        <option value="replace">Replace (overwrite)</option>
                    </select>
                    <div class="actions">
                        <button type="submit">Upload Records</button>
                        <button type="button" id="delete-records">Delete Records</button>
                    </div>
                </form>
            </div>
        </section>
    </main>
    <script type="module" src="/src/main.ts"></script>
</body>

</html>
